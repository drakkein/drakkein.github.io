<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- SEO Meta Tags -->
    <!-- Primary Meta Tags -->
<title>
  Gaming in Proxmox LXC | drakkein.me
</title>
<meta name="title" content="Gaming in Proxmox LXC" />
<meta name="description" content="My journey to run Steam with video output in unprivileged LXC with Nvidia GPU" />
<meta name="author" content="drakkein" />
<meta
  name="robots"
  content="index, follow"
/>
<meta name="language" content="en" />

<!-- Canonical URL -->
<link rel="canonical" href="https://drakkein.me/articles/gaming-in-proxmox-lxc/" />

<!-- Open Graph / Facebook -->
<meta
  property="og:type"
  content="article"
/>
<meta property="og:url" content="https://drakkein.me/articles/gaming-in-proxmox-lxc/" />
<meta property="og:title" content="Gaming in Proxmox LXC" />
<meta
  property="og:description"
  content="My journey to run Steam with video output in unprivileged LXC with Nvidia GPU"
/>
<meta property="og:site_name" content="drakkein.me" />
<meta property="og:locale" content="en_US" />


<meta property="article:author" content="drakkein" />
<meta property="article:published_time" content="2025-08-02" />
 
<meta property="article:tag" content="proxmox" />

<meta property="article:tag" content="lxc" />

<meta property="article:tag" content="gaming" />

<meta property="article:tag" content="steam" />

<meta property="article:tag" content="kodi" />
  

<!-- Twitter -->
<meta property="twitter:card" content="summary" />
<meta property="twitter:url" content="https://drakkein.me/articles/gaming-in-proxmox-lxc/" />
<meta property="twitter:title" content="Gaming in Proxmox LXC" />
<meta
  property="twitter:description"
  content="My journey to run Steam with video output in unprivileged LXC with Nvidia GPU"
/>

<meta property="twitter:creator" content="@drakkein" />
<meta property="twitter:site" content="@drakkein" />


<!-- JSON-LD Structured Data -->
<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "url": "https://drakkein.me/articles/gaming-in-proxmox-lxc/",
    "name": "Gaming in Proxmox LXC",
    "headline": "Gaming in Proxmox LXC",
    "description": "My journey to run Steam with video output in unprivileged LXC with Nvidia GPU",
    "inLanguage": "en",
    
    "datePublished": "2025-08-02",
    "dateModified": "2025-08-02",
    "wordCount": "2472",
    "keywords": ["proxmox","lxc","gaming","steam","kodi"],
    
    "author": {
      "@type": "Person",
      "name": "drakkein",
      "url": "https://drakkein.me/about"
    },
    "publisher": {
      "@type": "Organization",
      "name": "drakkein.me",
      "url": "https://drakkein.me"
    },
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https://drakkein.me/articles/gaming-in-proxmox-lxc/"
    }
  }
</script>


<!-- Additional Article Schema -->
<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "name": "Home",
        "item": "https://drakkein.me"
      },
      {
        "@type": "ListItem",
        "position": 2,
        "name": "Articles",
        "item": "https://drakkein.me/articles/"
      },
      {
        "@type": "ListItem",
        "position": 3,
        "name": "Gaming in Proxmox LXC",
        "item": "https://drakkein.me/articles/gaming-in-proxmox-lxc/"
      }
    ]
  }
</script>


<!-- RSS Feed -->
<link
  rel="alternate"
  type="application/atom+xml"
  title="drakkein.me"
  href="https://drakkein.me/feed.xml"
/>

<!-- Favicon and App Icons -->
<link rel="icon" href="/favicon.ico" sizes="any" />
<link rel="icon" href="/favicon.svg" type="image/svg+xml" />
<link rel="apple-touch-icon" href="/apple-touch-icon.png" />
<link rel="manifest" href="/manifest.json" />

<!-- Preconnect to external domains for performance -->
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="dns-prefetch" href="https://www.google-analytics.com" />


    <!-- Styles -->
    <link rel="stylesheet" href="/css/style.css" />
  </head>
  <body>
    <header>
      <nav>
        <a href="/" class="logo">[drakkein.me ~] #</a>
        <ul class="nav-links">
          <li><a href="/">Home</a></li>
          <li><a href="/articles/">Articles</a></li>
          <li><a href="/tags/">Tags</a></li>
          <li><a href="/about/">About</a></li>
          <li>
            <a href="/feed.xml">
              <span class="icon-settings" aria-hidden="true"
                ><svg class="" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" width="16" height="16" fill="currentColor" aria-hidden="true">
            <path d="M0 64c0-17.7 14.3-32 32-32 229.8 0 416 186.2 416 416 0 17.7-14.3 32-32 32s-32-14.3-32-32C384 253.6 226.4 96 32 96 14.3 96 0 81.7 0 64zM0 416a64 64 0 1 1 128 0 64 64 0 1 1 -128 0zM32 160c159.1 0 288 128.9 288 288 0 17.7-14.3 32-32 32s-32-14.3-32-32c0-123.7-100.3-224-224-224-17.7 0-32-14.3-32-32s14.3-32 32-32z"/>
        </svg></span
              >
              <span class="sr-only">RSS</span></a
            >
          </li>
        </ul>
      </nav>
    </header>

    <main>
<article class="article-content">
  <header class="article-header">
    <h1>Gaming in Proxmox LXC</h1>
    
    <div class="article-tags">
      
      <a href="/tags/proxmox/" class="tag">proxmox</a>
      
      <a href="/tags/lxc/" class="tag">lxc</a>
      
      <a href="/tags/gaming/" class="tag">gaming</a>
      
      <a href="/tags/steam/" class="tag">steam</a>
      
      <a href="/tags/kodi/" class="tag">kodi</a>
      
    </div>
     
    <time class="article-date" datetime="2025-08-02"
      >August 2, 2025</time
    >
    
  </header>

  <div class="article-body"><p>My journey to run Steam with video output in an unprivileged LXC container with Nvidia GPU passthrough.</p>
<h2>Why Even Bother?</h2>
<p>As the proud owner of an old CRT TV scavenged from my parents' garage, I wanted to use it for something more than booting Mario on the NES once a year. It occurred to me: why not reminisce about old times while watching classic cartoons and anime, and maybe even play some retro games? So I bought <strong>HDMI to SCART</strong> dongle and started to think.</p>
<p>The challenge was finding an efficient way to run gaming and media applications without dedicating an entire virtual machine to occasional use. This led me to explore running a full desktop environment within an LXC container with GPU passthrough.</p>
<h2>Hardware Setup</h2>
<p>My machine is rather powerful for this endeavor, featuring:</p>
<ul>
<li>AMD EPYC 7551P</li>
<li>128 GB ECC RAM</li>
<li>Nvidia RTX A400</li>
<li>Nvidia RTX 3090</li>
</ul>
<p>The system runs Proxmox <code>8.4.5</code> with kernel <code>6.12-12-pve</code>. Since I have two GPUs, the obvious solution would be to pass one through to a VM and easily achieve what I want. However, I won't be using this daily, so why waste processing power on an idle VM? You might suggest simply turning off the VM when it's not needed, but I'm too lazy for that â€“ I want to have my cake and eat it too. So how do we accomplish this with an LXC container?</p>
<h2>Setting Up the LXC Container</h2>
<p>I've been daily driving Arch Linux for quite some time, so the obvious choice for me is the <code>archlinux-base_20240911-1_amd64</code> template. You should go with whatever distribution you're familiar with, but keep in mind that group mappings and package names will differ.</p>
<h3>Device Passthrough</h3>
<p>Proxmox 8.4.5 introduces a new method for passing devices to LXC containers, which we'll use instead of the previously viable mountpoint approach.</p>
<p>Let's add devices to my LXC by editing <code>/etc/pve/lxc/xxx.conf</code>:</p>
<pre class="language-conf"><code class="language-conf">dev0: /dev/dri/card2,gid=985,mode=0666
dev1: /dev/dri/renderD129,gid=989,mode=0666
dev10: /dev/snd/hwC1D0,gid=996
dev11: /dev/snd/pcmC1D7p,gid=996
dev12: /dev/snd/pcmC1D8p,gid=996
dev13: /dev/snd/pcmC1D9p,gid=996
dev2: /dev/nvidia1,mode=0666
dev3: /dev/nvidiactl,mode=0666
dev4: /dev/nvidia-modeset,mode=0666
dev5: /dev/nvidia-uvm,mode=0666
dev6: /dev/nvidia-uvm-tools,mode=0666
dev7: /dev/fb1,gid=985,mode=0666
dev8: /dev/snd/controlC1,gid=996
dev9: /dev/snd/pcmC1D3p,gid=996</code></pre>
<p>What do these mappings accomplish? We want devices to be usable within the container, which requires proper group mapping between the host and container.</p>
<p>To check groups in your container, run:</p>
<pre class="language-bash"><code class="language-bash">getent group render
<span class="token comment"># or</span>
<span class="token function">cat</span> /etc/group</code></pre>
<p>The important groups to map are:</p>
<pre class="language-text"><code class="language-text">render:x:989:
video:x:985:
audio:x:996:</code></pre>
<p>In my case, I'm passing through my RTX 3090, which is my second GPU. That's why you see <code>nvidia1</code>, <code>card2</code>, and <code>renderD129</code> instead of <code>nvidia0</code>, <code>card0</code>, and <code>renderD128</code>.</p>
<h3>I Use Arch BTW</h3>
<p>Once the LXC container is running, let's start by refreshing the pacman keys:</p>
<pre class="language-bash"><code class="language-bash">pacman-key <span class="token parameter variable">--init</span>
pacman-key <span class="token parameter variable">--populate</span> archlinux
pacman-key --refresh-keys</code></pre>
<p>Now update packages and install git:</p>
<pre class="language-bash"><code class="language-bash">pacman <span class="token parameter variable">-Syuu</span>
pacman <span class="token parameter variable">-S</span> <span class="token parameter variable">--needed</span> <span class="token function">git</span> base-devel</code></pre>
<p>Finally, create the user account:</p>
<pre class="language-bash"><code class="language-bash"><span class="token function">groupadd</span> drakkein
<span class="token function">useradd</span> <span class="token parameter variable">-m</span> <span class="token parameter variable">-g</span> drakkein <span class="token parameter variable">-d</span> /home/drakkein drakkein
<span class="token function">passwd</span> drakkein
<span class="token function">usermod</span> <span class="token parameter variable">-aG</span> sudo,render,video,audio,git drakkein</code></pre>
<p>From now on, I'll use <code>yay</code> for package management. You can use it as well or stick with <code>pacman</code>.</p>
<h3>Nvidia Driver Installation</h3>
<p>My host system has kernel modules for driver version <code>575.64.03</code>, so we'll use the same version in the container:</p>
<pre class="language-bash"><code class="language-bash"><span class="token function">curl</span> https://us.download.nvidia.com/XFree86/Linux-x86_64/575.64.03/NVIDIA-Linux-x86_64-575.64.03.run <span class="token parameter variable">-o</span> NVIDIA-Linux-x86_64-575.64.03.run
<span class="token function">chmod</span> +x ./NVIDIA-Linux-x86_64-575.64.03.run
<span class="token function">sudo</span> ./NVIDIA-Linux-x86_64-575.64.03.run --no-kernel-modules <span class="token parameter variable">--silent</span>
<span class="token comment"># The Nvidia installer will complain about missing Vulkan ICD loader</span>
yay <span class="token parameter variable">-S</span> vulkan-icd-loader</code></pre>
<p>Time for a test, and voilÃ ! My GPU is detected by the driver:</p>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">[</span>drakkein@tvbox-arch ~<span class="token punctuation">]</span>$ nvidia-smi
Fri Aug  <span class="token number">1</span> <span class="token number">19</span>:06:56 <span class="token number">2025</span>
+-----------------------------------------------------------------------------------------+
<span class="token operator">|</span> NVIDIA-SMI <span class="token number">575.64</span>.03              Driver Version: <span class="token number">575.64</span>.03      CUDA Version: <span class="token number">12.9</span>     <span class="token operator">|</span>
<span class="token operator">|</span>-----------------------------------------+------------------------+----------------------+
<span class="token operator">|</span> GPU  Name                 Persistence-M <span class="token operator">|</span> Bus-Id          Disp.A <span class="token operator">|</span> Volatile Uncorr. ECC <span class="token operator">|</span>
<span class="token operator">|</span> Fan  Temp   Perf          Pwr:Usage/Cap <span class="token operator">|</span>           Memory-Usage <span class="token operator">|</span> GPU-Util  Compute M. <span class="token operator">|</span>
<span class="token operator">|</span>                                         <span class="token operator">|</span>                        <span class="token operator">|</span>               MIG M. <span class="token operator">|</span>
<span class="token operator">|</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token operator">+=</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token operator">+=</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token operator">|</span>
<span class="token operator">|</span>   <span class="token number">0</span>  NVIDIA GeForce RTX <span class="token number">3090</span>        Off <span class="token operator">|</span>   00000000:21:00.0  On <span class="token operator">|</span>                  N/A <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">0</span>%   53C    P8             19W /  420W <span class="token operator">|</span>       8MiB /  24576MiB <span class="token operator">|</span>      <span class="token number">0</span>%      Default <span class="token operator">|</span>
<span class="token operator">|</span>                                         <span class="token operator">|</span>                        <span class="token operator">|</span>                  N/A <span class="token operator">|</span>
+-----------------------------------------+------------------------+----------------------+

+-----------------------------------------------------------------------------------------+
<span class="token operator">|</span> Processes:                                                                              <span class="token operator">|</span>
<span class="token operator">|</span>  GPU   GI   CI              PID   Type   Process name                        GPU Memory <span class="token operator">|</span>
<span class="token operator">|</span>        ID   ID                                                               Usage      <span class="token operator">|</span>
<span class="token operator">|</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token operator">|</span>
<span class="token operator">|</span>  No running processes found                                                             <span class="token operator">|</span>
+-----------------------------------------------------------------------------------------+</code></pre>
<p>But how do we display something from the LXC container? Let's start by displaying some noise on the framebuffer:</p>
<pre class="language-bash"><code class="language-bash"><span class="token function">cat</span> /dev/urandom <span class="token operator">></span> /dev/fb1</code></pre>
<h2>Desktop Environment Setup</h2>
<p>Since our GPU is working and displaying noise on the screen, it's time to install <a href="https://wiki.archlinux.org/title/Xorg">Xorg</a> and <a href="https://wiki.archlinux.org/title/KDE#Plasma">Plasma</a>. We'll follow the Arch Wiki for this. The installation might complain about existing files for <code>mesa</code> and <code>libglvnd</code> â€“ the culprit is the Nvidia driver.</p>
<p>Additional packages I want to install are <code>x11vnc steam firefox</code>, so it's a good time to enable the <code>multilib</code> repository.</p>
<p>Time to prepare X11 by editing <code>/etc/X11/xorg.conf</code> and adding our Nvidia card to the configuration:</p>
<pre class="language-conf"><code class="language-conf">Section "ServerLayout"
    Identifier     "Layout0"
    Screen      0  "Screen0" 0 0
    InputDevice    "Keyboard0" "CoreKeyboard"
    InputDevice    "Mouse0" "CorePointer"
EndSection

Section "Files"
EndSection

Section "InputDevice"
    # generated from default
    Identifier     "Mouse0"
    Driver         "mouse"
    Option         "Protocol" "auto"
    Option         "Device" "/dev/mouse"
    Option         "Emulate3Buttons" "no"
    Option         "ZAxisMapping" "4 5"
EndSection

Section "InputDevice"
    # generated from default
    Identifier     "Keyboard0"
    Driver         "kbd"
EndSection

Section "Monitor"
    Identifier     "Monitor0"
    VendorName     "Unknown"
    ModelName      "Unknown"
    Option         "DPMS"
EndSection

Section "Device"
    Identifier     "NvidiaCard"
    Driver         "nvidia"
    VendorName     "NVIDIA Corporation"
    BoardName      "GeForce RTX 3090"
    BusID          "PCI:33:0:0"
EndSection

Section "Screen"
    Identifier     "Screen0"
    Device         "Device0"
    Monitor        "Monitor0"
    DefaultDepth    24
    Option         "AllowEmptyInitialConfiguration" "true"
    Option         "Stereo" "0"
    Option         "nvidiaXineramaInfoOrder" "DP-5"
    Option         "metamodes" "1024x768_60 +0+0"
    Option         "SLI" "Off"
    Option         "MultiGPU" "Off"
    Option         "BaseMosaic" "off"
    SubSection     "Display"
        Depth       24
    EndSubSection
EndSection</code></pre>
<h3>How Do We Start It?</h3>
<p>In an LXC container, we don't have virtual terminals (VT), so the typical graphical login with a greeter won't work. We need to start X manually and launch Plasma. However, this creates another problem: <code>$DBUS_SESSION_BUS_ADDRESS</code> and <code>$XDG_RUNTIME_DIR</code> are missing, so none of our systemd user units will launch. We can set them manually:</p>
<pre class="language-bash"><code class="language-bash"><span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">XDG_RUNTIME_DIR</span></span><span class="token operator">=</span><span class="token string">"/run/user/<span class="token variable"><span class="token variable">$(</span><span class="token function">id</span> <span class="token parameter variable">-u</span><span class="token variable">)</span></span>"</span>
<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> <span class="token string">"<span class="token environment constant">$XDG_RUNTIME_DIR</span>"</span>
<span class="token builtin class-name">eval</span> <span class="token variable"><span class="token variable">$(</span>dbus-launch --sh-syntax --exit-with-session<span class="token variable">)</span></span></code></pre>
<p>Unfortunately, it's still not working:</p>
<pre class="language-bash"><code class="language-bash">Failed to connect to user scope bus via <span class="token builtin class-name">local</span> transport: <span class="token environment constant">$DBUS_SESSION_BUS_ADDRESS</span> and <span class="token environment constant">$XDG_RUNTIME_DIR</span> not defined <span class="token punctuation">(</span>consider using <span class="token parameter variable">--machine</span><span class="token operator">=</span><span class="token operator">&lt;</span>user<span class="token operator">></span>@.host <span class="token parameter variable">--user</span> to connect to bus of other user<span class="token punctuation">)</span></code></pre>
<p>The solution is to either provide the machine parameter or use <code>machinectl shell drakkein@.host</code>, which makes our user units work properly. Here is the <a href="https://git.drakkein.me/drakkein/selfhosted/src/branch/main/scripts/startplasma-custom-x11">Convinient script</a> that I use to launch plasma.</p>
<figure><picture><source type="image/webp" srcset="/img/NTbbm4IPr--900.webp 900w" sizes="calc(100vw - 2rem)"><img alt="Plasma running in LXC" loading="lazy" decoding="async" src="/img/NTbbm4IPr--900.jpeg" width="900" height="678"></picture><figcaption>Plasma successfully running inside the LXC container</figcaption></figure>
<h3>What If Sound Isn't Working?</h3>
<p>The likely reason is that no sink has been created for your audio device. In my case, I'm using the third HDMI port of my GPU, which corresponds to the second audio device.</p>
<p>To create a sink manually, create the file <code>/etc/pipewire/pipewire.conf.d/99-hdmi-alsa-sink.conf</code>:</p>
<pre class="language-conf"><code class="language-conf">context.objects = [
  {
    factory = adapter
    args = {
      factory.name    = api.alsa.pcm.sink
      node.name       = "alsa-hdmi-sink"
      node.description = "Manual HDMI Sink (hw:1,3)"
      media.class     = "Audio/Sink"
      audio.position  = "FL,FR"
      api.alsa.path   = "hw:1,3"
      api.alsa.format = "S16LE"
      api.alsa.rate   = 48000
      api.alsa.channels = 2
      priority.session = 1000
      node.exclusive = false
    }
  }
]</code></pre>
<h3>How to Remove System Policy Prompts</h3>
<p>First, add your user to the <code>network</code> group. Then create a polkit rule at <code>/etc/polkit-1/rules.d/50-org.freedesktop.NetworkManager.rules</code>:</p>
<pre class="language-conf"><code class="language-conf">polkit.addRule(function(action, subject) {
  if (action.id.indexOf("org.freedesktop.NetworkManager.") == 0 && subject.isInGroup("network")) {
    return polkit.Result.YES;
  }
});</code></pre>
<h2>Gaming Setup</h2>
<p>For gaming, I installed <code>steam</code>, <code>gamescope</code>, and <code>rpcs3</code>. However, we need input devices, so the first step is to pass them to the LXC container:</p>
<pre class="language-conf"><code class="language-conf">dev14: /dev/input/js0,gid=994
dev15: /dev/input/event13,gid=994</code></pre>
<p>Remember to add your user to the <code>input</code> group.</p>
<figure><picture><source type="image/webp" srcset="/img/XT-NY8HRT8-900.webp 900w" sizes="calc(100vw - 2rem)"><img alt="Gamepad visible in Plasma" loading="lazy" decoding="async" src="/img/XT-NY8HRT8-900.jpeg" width="900" height="678"></picture><figcaption>Gamepad successfully detected Plasma system settings</figcaption></figure>
<p>If you're wondering why my device shows as <code>8bitDo Virtual Gamepad</code>, it's because Steam has a problem with reattaching disconnected devices. I decided to create a virtual device with <code>uinput</code> and mirror all events from my real device while ignoring disconnects. This also solves the issue with my <code>8BitDo Ultimate</code> controller under Linux, where it immediately disconnects if nothing grabs its events.</p>
<p>Everything appears to be working, so I can finally create a systemd unit that will start Plasma after LXC launch:</p>
<pre class="language-ini"><code class="language-ini"><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">Unit</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">Description</span><span class="token punctuation">=</span><span class="token value attr-value">Start plasma after LXC start</span>
<span class="token key attr-name">After</span><span class="token punctuation">=</span><span class="token value attr-value">network.target</span>

<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">Service</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">Type</span><span class="token punctuation">=</span><span class="token value attr-value">simple</span>
<span class="token key attr-name">ExecStart</span><span class="token punctuation">=</span><span class="token value attr-value">/usr/bin/startplasma-lxc</span>

<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">Install</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">WantedBy</span><span class="token punctuation">=</span><span class="token value attr-value">multi-user.target</span></code></pre>
<h3>Gamescope Configuration</h3>
<p>I want a Steam Deck-like experience using a gamepad, so my goal is to launch a gamescope session. After installing <code>gamescope</code>, <code>mangohud</code>, and <code>lib32-mangohud</code>, the first step is to create a new script at <code>/usr/bin/gamescope-session</code>. Besides launching Steam, we also move the cursor out of the way:</p>
<pre class="language-bash"><code class="language-bash"><span class="token shebang important">#!/bin/bash</span>
xdotool mousemove <span class="token number">1023</span> <span class="token number">767</span>
gamescope <span class="token parameter variable">--mangoapp</span> <span class="token parameter variable">-f</span> <span class="token parameter variable">-e</span> <span class="token parameter variable">-W</span> <span class="token number">1024</span> <span class="token parameter variable">-H</span> <span class="token number">768</span> -- steam <span class="token parameter variable">-gamepadui</span> <span class="token parameter variable">-steamos3</span> <span class="token parameter variable">-steampal</span> <span class="token parameter variable">-steamdeck</span></code></pre>
<p>Create <code>/usr/bin/steamos-session-select</code> to allow returning to Plasma:</p>
<pre class="language-bash"><code class="language-bash"><span class="token shebang important">#!/bin/bash</span>
steam <span class="token parameter variable">-shutdown</span></code></pre>
<p>Create <code>/usr/bin/steamos-update</code> and <code>/usr/bin/jupiter-biosupdate</code> to mock SteamOS and Deck BIOS updates:</p>
<pre class="language-bash"><code class="language-bash"><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">exit</span> <span class="token number">0</span><span class="token punctuation">;</span></code></pre>
<p>For convenience, I also created a desktop shortcut for <code>gamescope-session</code>:</p>
<pre class="language-ini"><code class="language-ini"><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">Desktop Entry</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">Exec</span><span class="token punctuation">=</span><span class="token value attr-value">gamescope-session</span>
<span class="token key attr-name">Icon</span><span class="token punctuation">=</span><span class="token value attr-value">steam</span>
<span class="token key attr-name">Name</span><span class="token punctuation">=</span><span class="token value attr-value">Steam Gamescope</span>
<span class="token key attr-name">StartupNotify</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
<span class="token key attr-name">Terminal</span><span class="token punctuation">=</span><span class="token value attr-value">false</span>
<span class="token key attr-name">Type</span><span class="token punctuation">=</span><span class="token value attr-value">Application</span></code></pre>
<figure><picture><source type="image/webp" srcset="/img/U3qK7Gkhwh-900.webp 900w" sizes="calc(100vw - 2rem)"><img alt="Gamescope running under LXC" loading="lazy" decoding="async" src="/img/U3qK7Gkhwh-900.jpeg" width="900" height="680"></picture><figcaption>Gamescope is starting in the LXC container</figcaption></figure>
<figure><picture><source type="image/webp" srcset="/img/3079Fbyeaj-900.webp 900w" sizes="calc(100vw - 2rem)"><img alt="Steam welcome screen" loading="lazy" decoding="async" src="/img/3079Fbyeaj-900.jpeg" width="900" height="674"></picture><figcaption>Successful login to Steam</figcaption></figure>
<p>For now, we can exit Steam and continue with the setup.</p>
<h3>EmuDeck Integration</h3>
<p>The next step is to integrate emulation into Steam. For this, I'll use <a href="https://www.emudeck.com/">EmuDeck</a>.</p>
<p>For <code>RPCS3</code>, we need to set a higher memory lock limit, so I need to update my LXC configuration. We also want to pin CPU cores for this LXC container:</p>
<pre class="language-conf"><code class="language-conf">lxc.prlimit.memlock: unlimited
lxc.cgroup.cpuset.cpus=0-15</code></pre>
<figure><picture><source type="image/webp" srcset="/img/692FoIf-3w-900.webp 900w" sizes="calc(100vw - 2rem)"><img alt="RPCS3 in LXC" loading="lazy" decoding="async" src="/img/692FoIf-3w-900.jpeg" width="900" height="673"></picture><figcaption>RPCS3 running successfully in the LXC container</figcaption></figure>
<h3>Kodi Setup</h3>
<p>Kodi setup is straightforward â€“ all we need to install is <code>kodi</code> and the <code>kodi-peripheral-joystick</code> plugin. I self-host Jellyfin, so in my case, an additional dependency is the <a href="https://jellyfin.org/docs/general/clients/kodi/">Jellyfin plugin</a>.</p>
<p>All we need to do now is add a Kodi shortcut to Steam.</p>
<h3>Final Configuration</h3>
<p>Now we need to automatically launch our <code>gamescope-session</code>. I opted to do this via Plasma Settings â†’ Startup and Shutdown â†’ Autostart â†’ Login Scripts.</p>
<figure><picture><source type="image/webp" srcset="/img/tvfN2YSFcs-900.webp 900w" sizes="calc(100vw - 2rem)"><img alt="CRT TV" loading="lazy" decoding="async" src="/img/tvfN2YSFcs-900.jpeg" width="900" height="653"></picture><figcaption>Mission success! Steam is showing on CRT TV</figcaption></figure>
</div>
</article>

<hr />

<script
  src="https://utteranc.es/client.js"
  repo="drakkein/drakkein.github.io"
  issue-term="pathname"
  theme="dark-blue"
  crossorigin="anonymous"
  async
></script>
</main>

    <footer>
      <p>
        &copy; 2025 drakkein.me
        <span class="color-primary">&hearts;</span> Built with
        <a href="https://www.11ty.dev/" target="_blank" rel="noopener">11tty</a>
      </p>
    </footer>
  </body>
</html>
